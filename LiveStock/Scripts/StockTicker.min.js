function formatStock(n){return $.extend(n,{Price:n.Price.toFixed(2),PercentChange:"%"+n.PercentChange.toFixed(2)+(n.PercentChange===0?"":n.PercentChange>=0?" ▲":" ▼"),DirectionStyle:n.PercentChange===0?"":n.PercentChange>=0?"color: green":"color: red"})}function init(){ticker.server.getAllStocks().done(function(n){$stockTableBody.empty();$.each(n,function(){console.log(this);const n=formatStock(this);$stockTableBody.append(rowTemplate.supplant(n))})})}String.prototype.supplant||(String.prototype.supplant=function(n){return this.replace(/{([^{}]*)}/g,function(t,i){var r=n[i];return typeof r=="string"||typeof r=="number"?r:t})});const ticker=$.connection.stockTickerMini,$stockTable=$("#stockTable"),$stockTableBody=$stockTable.find("tbody"),rowTemplate='<tr data-symbol="{Symbol}"><td>{Symbol}<\/td><td>{Price}<\/td><td style="{DirectionStyle}">{PercentChange}<\/td><\/tr>';ticker.client.updateStockPrice=function(n){console.log(n);const t=formatStock(n),i=$(rowTemplate.supplant(t));$stockTableBody.find("tr[data-symbol="+n.Symbol+"]").replaceWith(i)};$.connection.hub.start().done(init);